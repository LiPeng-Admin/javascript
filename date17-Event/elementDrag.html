<html>
    <head>
        <meta charset="utf-8">
        <title>鼠标拖拽</title>
        <style type="text/css">
        #box1{
            width: 100px;
            height: 100px;
            background-color: greenyellow;
            position: absolute;
        }
        #box2{
            width: 100px;
            height: 100px;
            background-color: yellowgreen;
            position: absolute;
            left: 200px;
            top:200px;

        }
        </style>
        <script type="text/javascript">
        window.onload=function(){
            /*
            拖拽box1 元素
            拖拽的流程
            1：当鼠标在被拖拽元素上按下时，开始拖拽onmousedown
            2：当鼠标移动时被拖拽元素跟随鼠标移动onmousemove
            3: 当鼠标松开时，被拖拽元素固定在当前位置onmouseup

            */
              //获取box1
              var box1=document.getElementById("box1");
              //获取box2
              var box2=document.getElementById("box2");
              drag(box1);
              drag(box2);

            };

        function drag(obj){
              //为box1 绑定一个鼠标按下事件
              obj.onmousedown=function(event){
                   //div 的水平偏移量 鼠标.clientX-元素.offsetLeft
                  //div 的竖直偏移量 鼠标.clientY-元素.offsetTop

                  event=event ||window.event;
                 var ol= event.clientX-obj.offsetLeft;
                 var ot= event.clientY-obj.offsetTop


                 //绑定鼠标移动事件
           document.onmousemove=function(event){

           
            //获取鼠标的位置
            event=event ||window.event;
            // var left=event.clientX;
            // var top=event.clientY;

             /*clientX,clientY 相对于可见窗口的坐标
               div 的偏移量，是相对于整个网页的
            */

            var left=event.clientX-ol;
            var top=event.clientY-ot;
            //设置div 的偏移量


            obj.style.left=left+"px";
            obj.style.top=top+"px";

               };
        //为document 绑定一个鼠标松开事件
            document.onmouseup=function(){
                //取消document的onmousemove事件
                document.onmousemove =null;
                //取消document的onmouseup事件
                document.onmouseup=null;

            };

            };
            

        };
        </script>
    </head>
    <body>
        <div id="box1"></div>
        <div id="box2"></div>
    </body>
</html>